<!DOCTYPE html>
<html lang="es">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Teleprompter TuPlan PRO</title>

<style>

body{
margin:0;
background:black;
font-family:Arial;
overflow:hidden;
color:white;
}

video{
position:fixed;
width:100%;
height:100%;
object-fit:cover;
z-index:-1;
}

#textoZona{

position:absolute;
width:90%;
left:5%;
top:10%;

text-align:center;

}

.linea{

font-size:42px;
margin:12px 0;

text-shadow:0px 0px 10px black;

}

#editorZona{

position:absolute;
top:0;
width:100%;
background:#000000dd;
padding:10px;
display:none;

}

textarea{

width:95%;
height:140px;

font-size:18px;

margin:5px;

}



#botones{

position:fixed;

bottom:70px;

width:100%;

text-align:center;

}



.btn{

background:#333;

border:none;

color:white;

padding:16px;

margin:6px;

border-radius:50%;

font-size:18px;

width:60px;

height:60px;

}



.rec{

background:red;

animation:none;

}

.recAct{

animation:blink 1s infinite;

}



@keyframes blink{

50%{opacity:0.3}

}



#recIndicador{

position:fixed;

top:10px;

right:20px;

font-size:24px;

display:none;

}



#sliders{

position:fixed;

right:10px;

top:120px;

background:#000000cc;

padding:10px;

border-radius:12px;

}



.slider{

width:120px;

}



#contador{

position:fixed;

top:50%;

left:50%;

transform:translate(-50%,-50%);

font-size:120px;

display:none;

}

</style>

</head>

<body>

<video id="camara" autoplay muted></video>

<div id="recIndicador">

üî¥ REC

</div>

<div id="contador">

5

</div>


<div id="editorZona">

<textarea id="editor">

Pega aqu√≠ tu texto

</textarea>

<br>

<button onclick="guardarTexto()">Guardar</button>

<button onclick="borrarTexto()">Borrar</button>

</div>



<div id="textoZona">

<div class="linea" id="l1"></div>

<div class="linea" id="l2"></div>

<div class="linea" id="l3"></div>

</div>



<div id="botones">

<button class="btn" onclick="play()">‚ñ∂</button>

<button class="btn" onclick="pausa()">‚è∏</button>

<button class="btn rec" id="recBtn" onclick="grabar()">‚óè</button>

<button class="btn" onclick="stop()">‚ñ†</button>

<button class="btn" onclick="mostrarTexto()">T</button>

<button class="btn" onclick="mostrarSliders()">‚öô</button>

</div>



<div id="sliders">

Velocidad<br>

<input type="range" min="0.2" max="3" step="0.1" value="1" id="vel" class="slider">

<br><br>

Tama√±o<br>

<input type="range" min="30" max="80" value="42" id="tam" class="slider">

<br><br>

Altura<br>

<input type="range" min="0" max="100" value="10" id="alt" class="slider">

</div>


<script>

let lineas=[]
let pos=0

let velocidad=1

let intervalo

let recorder

let chunks=[]


navigator.mediaDevices.getUserMedia({
video:true,
audio:true
})

.then(stream=>{

camara.srcObject=stream

recorder=new MediaRecorder(stream)

recorder.ondataavailable=e=>chunks.push(e.data)

recorder.onstop=e=>{

let blob=new Blob(chunks)

chunks=[]

if(confirm("Guardar video?")){

let a=document.createElement("a")

a.href=URL.createObjectURL(blob)

a.download="video-"+Date.now()+".webm"

a.click()

}

}

})


function prepararTexto(){

let t=editor.value

.replace(/\n/g," ")

.split(" ")

let frases=[]

let temp=""

t.forEach(p=>{

temp+=p+" "

if(temp.length>30){

frases.push(temp)

temp=""

}

})

lineas=frases

pos=0

}



function mostrarLineas(){

l1.innerText=lineas[pos]||""

l2.innerText=lineas[pos+1]||""

l3.innerText=lineas[pos+2]||""

}



function play(){

prepararTexto()

clearInterval(intervalo)

intervalo=setInterval(()=>{

pos++

mostrarLineas()

},2000/velocidad)

}



function pausa(){

clearInterval(intervalo)

}



function stop(){

clearInterval(intervalo)

pos=0

mostrarLineas()

}



function grabar(){

document.getElementById("sliders").style.display="none"

let c=5

contador.style.display="block"

contador.innerText=c

let t=setInterval(()=>{

c--

contador.innerText=c

if(c==0){

clearInterval(t)

contador.style.display="none"

recorder.start()

recIndicador.style.display="block"

recBtn.classList.add("recAct")

play()

}

},1000)

}



function mostrarTexto(){

let e=editorZona

e.style.display=e.style.display=="none"?"block":"none"

}



function mostrarSliders(){

let s=sliders

s.style.display=s.style.display=="none"?"block":"none"

}



function guardarTexto(){

localStorage.setItem("texto",editor.value)

alert("Texto guardado")

}



function borrarTexto(){

editor.value=""

alert("Texto borrado")

}



window.onload=()=>{

editor.value=localStorage.getItem("texto")||""

mostrarLineas()

}



vel.oninput=()=>{

velocidad=vel.value

}



tam.oninput=()=>{

let t=tam.value

document.querySelectorAll(".linea").forEach(l=>l.style.fontSize=t+"px")

}



alt.oninput=()=>{

textoZona.style.top=alt.value+"%"

}



</script>


</body>
</html>
