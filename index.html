<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Teleprompter Pro</title>

<style>

body{
margin:0;
background:black;
color:white;
font-family: "Helvetica Neue", Arial;
overflow:hidden;
}

/* VIDEO */

#preview{

position:fixed;
top:0;
left:0;
width:100%;
height:100%;
object-fit:cover;
z-index:-1;

}


/* TEXTO */

#teleprompter{

position:absolute;
width:92%;
left:4%;
top:85%;

text-align:center;

font-size:38px;
line-height:1.3;

font-weight:500;

text-shadow:0px 0px 8px black;

}


/* PANEL */

#panel{

position:fixed;
bottom:10px;
width:100%;
text-align:center;

background:rgba(0,0,0,0.5);
padding:8px;

border-radius:15px;

}



/* BOTONES */

.btn{

background:#1976D2;
color:white;
border:none;

padding:10px 18px;
margin:4px;

border-radius:10px;

font-size:15px;

}

.btn:active{

background:#0D47A1;

}


/* TEXTO */

textarea{

width:95%;
height:70px;

font-size:15px;

border-radius:10px;

padding:6px;

border:none;

}



/* SLIDERS */

.slider{

width:140px;

}


#countdown{

position:fixed;
top:45%;
width:100%;

text-align:center;

font-size:90px;

font-weight:bold;

display:none;

}

</style>

</head>


<body>



<video id="preview" autoplay muted playsinline></video>


<div id="teleprompter"></div>


<div id="countdown"></div>



<div id="panel">


<textarea id="editor"
placeholder="Pega aquí tu texto listo para grabar..."></textarea>

<br>


<button class="btn" onclick="mostrar()">Mostrar</button>

<button class="btn" onclick="borrar()">Borrar</button>

<button class="btn" onclick="guardarTexto()">Guardar</button>

<button class="btn" onclick="cargarTexto()">Cargar</button>

<br>


Velocidad

<input
class="slider"
type="range"
min="0.2"
max="3"
step="0.1"
value="1"
id="velocidad">


Tamaño

<input
class="slider"
type="range"
min="28"
max="70"
value="38"
id="tamano">

Altura

<input
class="slider"
type="range"
min="0"
max="100"
value="85"
id="altura">

<br>

<button class="btn" onclick="grabar()">Grabar</button>

<button class="btn" onclick="stop()">Stop</button>


</div>




<script>


let stream;
let mediaRecorder;
let chunks=[];

let scrollInterval;



navigator.mediaDevices.getUserMedia({

video:true,
audio:true

}).then(s=>{

stream=s;

preview.srcObject=s;

});



function mostrar(){

teleprompter.innerText=
editor.value;

teleprompter.style.fontSize=
tamano.value+"px";

teleprompter.style.top=
altura.value+"%";

iniciarScroll();

}



function iniciarScroll(){

clearInterval(scrollInterval);

let pos=altura.value;

scrollInterval=setInterval(()=>{

pos-=0.05*velocidad.value;

teleprompter.style.top=
pos+"%";

},40);

}



tamano.oninput=()=>{

teleprompter.style.fontSize=
tamano.value+"px";

};


altura.oninput=()=>{

teleprompter.style.top=
altura.value+"%";

};



velocidad.oninput=()=>{

iniciarScroll();

};




function borrar(){

if(confirm("¿Borrar texto guardado?")){

editor.value="";

localStorage.removeItem("texto");

}

}




function guardarTexto(){

localStorage.setItem(
"texto",
editor.value
);

alert("Texto guardado");

}



function cargarTexto(){

editor.value=
localStorage.getItem("texto")||"";

}




function grabar(){


let c=5;

countdown.style.display="block";


let x=setInterval(()=>{

countdown.innerText=c;

c--;

if(c<0){

clearInterval(x);

countdown.style.display="none";

iniciarGrabacion();

}

},1000);

}



function iniciarGrabacion(){


chunks=[];

mediaRecorder=new MediaRecorder(stream);


mediaRecorder.ondataavailable=e=>{

chunks.push(e.data);

};



mediaRecorder.onstop=e=>{


let blob=new Blob(chunks);

let url=URL.createObjectURL(blob);


if(confirm("¿Guardar video?")){

let a=document.createElement("a");

a.href=url;

a.download="video.webm";

a.click();

}

};


mediaRecorder.start();

}




function stop(){

if(mediaRecorder){

mediaRecorder.stop();

}

clearInterval(scrollInterval);

}


</script>



</body>
</html>
